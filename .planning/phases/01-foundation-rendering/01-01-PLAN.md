---
phase: 01-foundation-rendering
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can type text in the chat input field and submit messages"
    - "When valid D2 source is provided, it renders as an SVG in the whiteboard area"
    - "Application loads in browser with modern SaaS aesthetic"
    - "User can follow simple instructions to set up local environment"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
    - path: "vite.config.ts"
      provides: "Vite configuration for React + TypeScript"
    - path: "tailwind.config.js"
      provides: "Tailwind CSS configuration"
    - path: "server/index.js"
      provides: "Express server for D2 CLI integration"
  key_links:
    - from: "Frontend"
      to: "D2 CLI"
      via: "Express backend proxy"
      pattern: "POST /api/render"
---

<objective>
Set up project foundation: React + Vite + TypeScript frontend, Express backend, and Tailwind CSS. Create the basic project structure that enables local development.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01-foundation-rendering/01-CONTEXT.md
@.planning/ROADMAP.md
</context>

<tasks>

<task type="auto">
  <name>Create package.json with all dependencies</name>
  <files>package.json</files>
  <action>
    Create package.json with:
    - Frontend: react 18.x, react-dom 18.x, vite 6.x, @vitejs/plugin-react, typescript, tailwindcss, postcss, autoprefixer
    - Backend: express, cors, multer (for file uploads if needed)
    - Dev: concurrently (for running both servers)
    - Scripts: "dev": "concurrently \"npm run dev:client\" \"npm run dev:server\"", "dev:client": "vite", "dev:server": "node server/index.js", "build": "vite build", "preview": "vite preview"
  </action>
  <verify>npm install succeeds without errors</verify>
  <done>package.json exists with all dependencies</done>
</task>

<task type="auto">
  <name>Set up Vite + React + TypeScript configuration</name>
  <files>vite.config.ts, tsconfig.json, index.html</files>
  <action>
    Create vite.config.ts with @vitejs/plugin-react(), path aliases (@ -> src)
    Create tsconfig.json with strict mode, jsx: preserve, path aliases
    Create index.html with root div, script pointing to src/main.tsx
  </action>
  <verify>npm run dev:client starts without errors</verify>
  <done>Frontend dev server runs successfully</done>
</task>

<task type="auto">
  <name>Configure Tailwind CSS</name>
  <files>tailwind.config.js, postcss.config.js, src/index.css</files>
  <action>
    Create tailwind.config.js with content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"], extend with indigo accent color (#6366f1), font family (Inter, system-ui)
    Create postcss.config.js with tailwindcss and autoprefixer plugins
    Create src/index.css with @tailwind base, components, utilities directives
  </action>
  <verify>Tailwind classes apply correctly in browser</verify>
  <done>Tailwind CSS configured and working</done>
</task>

<task type="auto">
  <name>Create Express backend server</name>
  <files>server/index.js</files>
  <action>
    Create server/index.js with:
    - Express app with cors middleware
    - POST /api/render endpoint that accepts { d2Source: string }
    - Calls D2 CLI: `echo d2Source | d2 -` to render to SVG
    - Returns { svg: string } or { error: string }
    - Runtime check for D2 availability on startup
  </action>
  <verify>npm run dev:server starts without errors</verify>
  <done>Express server runs on port 3001</done>
</task>

</tasks>

<verification>
- [ ] npm install completes successfully
- [ ] npm run dev starts both frontend and backend
- [ ] Frontend accessible at localhost:5173
- [ ] Backend accessible at localhost:3001
</verification>

<success_criteria>
Project structure complete with package.json, Vite config, Tailwind config, Express server. Running "npm install && npm run dev" starts both frontend and backend servers without errors.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-rendering/{phase}-01-SUMMARY.md`
</output>
